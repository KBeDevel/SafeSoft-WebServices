/*
 * THIS SCRIPT WAS GENERATED AUTMATICALLY FROM NODE JS (By KBeDeveloper)
 */

IF EXISTS DROP DATABASE ssdb;
IF NOT EXISTS CREATE DATABASE ssdb CHARACTER SET utf8 COLLATE utf8_general_ci;
USE ssdb;

IF NOT EXISTS CREATE TABLE USERS (
    `Code` VARCHAR(13) PRIMARY KEY,
    `RUT` VARCHAR(12) NOT NULL UNIQUE,
    `Name` VARCHAR(30),  -- UNICODE, UTF-8, NO_SPECIAL_CHARS
    `Phone` INTEGER(9) NOT NULL UNIQUE,
    `Address` VARCHAR(50) NOT NULL,
    `Type` INTEGER(1) NOT NULL,
    `Email` VARCHAR(40) NOT NULL UNIQUE,
    `Username` VARCHAR(25) NOT NULL UNIQUE,
    `Pass` VARCHAR(64) NOT NULL,
    `Token` VARCHAR(32) DEFAULT NULL,  -- UTF-8
    `TokenTime` TIMESTAMP DEFAULT NULL,
    `CreatedAt` TIMESTAMP DEFAULT NOW(),
    `UpdatedAt` TIMESTAMP DEFAULT NULL,
    `LoggedAt` TIMESTAMP DEFAULT NULL,
    `ParentOrg` VARCHAR(13) DEFAULT NULL,
) ENGINE=InnoDB;

IF NOT EXISTS CREATE TABLE EVENTS (
    `EventId` VARCHAR(32) PRIMARY KEY,
    `Type` INTEGER(1) NOT NULL,
    `CreatedAt` TIMESTAMP NOT NULL,
    `ClosedAt` TIMESTAMP DEFAULT NULL,
    `SubmittedAt` TIMESTAMP DEFAULT NOW(),
    `UserCode` VARCHAR(13) NOT NULL,
) ENGINE=InnoDB;

IF NOT EXISTS CREATE TABLE COMMENTS (
    `CommentId` VARCHAR(32) PRIMARY KEY,
    `Content` TEXT,  -- UNICODE, UTF-8
    `Type` VARCHAR(32),  -- UNICODE, UTF-8
    `EventId` VARCHAR(32) NOT NULL,
) ENGINE=InnoDB;

IF NOT EXISTS CREATE TABLE FORMS (
    `FormId` VARCHAR(32) PRIMARY KEY,
    `CreatedAt` TIMESTAMP DEFAULT NOW(),
    `EventId` VARCHAR(32) NOT NULL,
) ENGINE=InnoDB;

IF NOT EXISTS CREATE TABLE TOOLS (
    `ToolId` VARCHAR(32) PRIMARY KEY,
    `Name` VARCHAR(50) NOT NULL,
    `Status` INTEGER(1) NOT NULL,
    `FormId` VARCHAR(32) NOT NULL,
) ENGINE=InnoDB;

IF NOT EXISTS CREATE TABLE PEOPLE (
    `PersonId` VARCHAR(32) PRIMARY KEY,
    `Firstname` VARCHAR(25) NOT NULL,
    `Lastname` VARCHAR(30) NOT NULL,
    `Type` INTEGER(1) NOT NULL,
    `CorpName` VARCHAR(50) NOT NULL,
    `FormId` VARCHAR(32) NOT NULL,
) ENGINE=InnoDB;

